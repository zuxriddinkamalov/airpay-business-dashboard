(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d818d488"],{"0bfb":function(t,e,n){"use strict";var a=n("cb7c");t.exports=function(){var t=a(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"1cb8":function(t,e,n){"use strict";var a=n("c1df"),s=n.n(a);e["a"]={filters:{relativeTime:function(t,e){return t?e?s()(t,e).fromNow():s()(t).fromNow():""},time:function(t,e,n){return t?n?s()(t,n).format(e):s()(t).format(e):""}}}},"214f":function(t,e,n){"use strict";var a=n("32e9"),s=n("2aba"),i=n("79e5"),r=n("be13"),o=n("2b4c");t.exports=function(t,e,n){var c=o(t),l=n(r,c,""[t]),u=l[0],f=l[1];i(function(){var e={};return e[c]=function(){return 7},7!=""[t](e)})&&(s(String.prototype,t,u),a(RegExp.prototype,c,2==e?function(t,e){return f.call(t,this,e)}:function(t){return f.call(t,this)}))}},"27a4":function(t,e,n){"use strict";var a=n("7cf1"),s=n.n(a);s.a},"36fa":function(t,e,n){"use strict";n("6b54"),n("a481");e["a"]={filters:{shortEmail:function(t){var e=/^([a-zA-Z0-9]{1,2})(.+?)@/;return t.replace(e,"$1...@")},slice:function(t,e){return t.length>=e?t.slice(0,e)+"...":t},money:function(t){if(t){var e=parseInt(t);return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}return"0"}}}},3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"60fc":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("VBody",{attrs:{title:"Users"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("el-row",{attrs:{type:"flex",align:"middle",justify:"space-around"}},[n("el-col",{attrs:{xs:24,md:12}},[n("el-select",{staticClass:"filter-select",attrs:{"default-first-option":""},model:{value:t.filters.whitelist,callback:function(e){t.$set(t.filters,"whitelist",e)},expression:"filters.whitelist"}},[n("template",{slot:"prefix"},[n("div",{staticClass:"filter-select-prefix"},[t._v("Whitelist:")])]),n("el-option",{attrs:{label:"Moco whitelist",value:""}})],2)],1),n("el-col",{staticClass:"text-right",attrs:{xs:24,md:12}},[n("el-button",{staticClass:"shadow",on:{click:t.exportCSV}},[t._v("Export .CSV")])],1)],1)],1),n("div",{attrs:{slot:"content"},slot:"content"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"themed-table",staticStyle:{width:"100%"},attrs:{border:"","empty-text":"No users",data:t.usersData}},[n("el-table-column",{attrs:{label:"User",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"user-row"},[n("div",{staticClass:"table-tag email-filled"},[n("i",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}}),n("span",{staticStyle:{margin:"0 10px"}},[t._v(t._s(t._f("shortEmail")(e.row.email)))]),n("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])])]}}])}),n("el-table-column",{attrs:{label:"Info"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{staticClass:"shadow",on:{click:function(n){t.overview(e.row.id)}}},[t._v("Approve")])]}}])})],1),n("div",{staticClass:"table-pagination"},[n("el-pagination",{attrs:{background:"","prev-text":"Previous","next-text":"Next","popper-class":"table-pagination-inner",layout:"prev, pager, next","current-page":t.page,"page-size":t.tableConfig.perPage,total:t.tableConfig.total},on:{"current-change":t.pageChange}})],1)],1)])},s=[],i=n("9395"),r=n("2f62"),o=n("b17e"),c=n("81d5"),l=n("1cb8"),u=n("36fa"),f=n("3e11"),p=n("ab48"),d=n("9530"),g=n.n(d);function b(){var t=Object(p["a"])(["\n  query ($id: ID!, $business: ID!){\n    getUser(business: $business, id: $id){\n      id\n      email\n    }\n  }\n"]);return b=function(){return t},t}function h(){var t=Object(p["a"])(["\n  query ($pagination: PaginationInput, $business: ID!){\n    getUsers(business: $business, pagination: $pagination){\n      users {\n        id\n        email\n      }\n      pagination {\n        totalDocs\n        limit\n        offset\n        hasPrevPage\n        hasNextPage\n        page\n        totalPages\n        prevPage\n        nextPage\n      }\n    }\n  }\n"]);return h=function(){return t},t}var v=g()(h()),m=(g()(b()),n("d967")),x={name:"Users",data:function(){return{filters:{whitelist:""},tableConfig:{perPage:c["a"],total:0},loading:!1,usersData:[]}},mixins:[l["a"],u["a"]],components:{VBody:f["a"]},mounted:function(){this.loadUsers()},computed:Object(i["a"])({},Object(r["c"])({activeBusiness:function(t){return t.dashboard.activeBusiness}}),{page:{get:function(){return parseInt(Object(o["path"])(["query","page"],this.$route))||1},set:function(t){}}}),watch:{activeBusiness:function(t,e){this.$router.push({query:{}}),this.loadUsers()},$route:function(t,e){this.loadUsers()}},methods:{exportCSV:function(){console.warn("Export as csv")},loadUsers:function(){var t=this,e=this.activeBusiness.id,n=this.page;this.loading=!0,this.$apollo.query({query:v,variables:{business:e,pagination:{page:n,limit:c["a"]}}}).then(function(e){t.tableConfig.total=Object(o["path"])(["data","getUsers","pagination","totalDocs"],e),t.usersData=Object(o["path"])(["data","getUsers","users"],e),t.$store.commit("dashboard/users/".concat(m["a"]),{key:"usersList",value:t.usersData}),t.loading=!1}).catch(function(e){t.$message.error(e),t.loading=!1})},pageChange:function(t){this.$router.push({query:{page:t}})}}},w=x,y=(n("27a4"),n("2877")),C=Object(y["a"])(w,a,s,!1,null,"0e5fcd14",null);C.options.__file="Users.vue";e["default"]=C.exports},"6b54":function(t,e,n){"use strict";n("3846");var a=n("cb7c"),s=n("0bfb"),i=n("9e1e"),r="toString",o=/./[r],c=function(t){n("2aba")(RegExp.prototype,r,t,!0)};n("79e5")(function(){return"/a/b"!=o.call({source:"a",flags:"b"})})?c(function(){var t=a(this);return"/".concat(t.source,"/","flags"in t?t.flags:!i&&t instanceof RegExp?s.call(t):void 0)}):o.name!=r&&c(function(){return o.call(this)})},"7cf1":function(t,e,n){},"81d5":function(t,e,n){"use strict";n.d(e,"a",function(){return a});var a=5},a481:function(t,e,n){n("214f")("replace",2,function(t,e,n){return[function(a,s){"use strict";var i=t(this),r=void 0==a?void 0:a[e];return void 0!==r?r.call(a,i,s):n.call(String(i),a,s)},n]})}}]);
//# sourceMappingURL=chunk-d818d488.eed1c495.js.map